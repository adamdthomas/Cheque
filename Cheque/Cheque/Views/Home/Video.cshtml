@{
    ViewBag.Title = "Video";
}

@if (Request.IsAuthenticated)
{
    if (User.Identity.Name == "adamdthomas@gmail.com")
    {
            <script>
                function directCam(d) {
                    $.ajax({
                        url: '@Url.Action("controlcam", "home")',
                        data: { d: d }
                    });
                }
            </script>

                <h1 class="lead">Videos</h1>

                <div class="panel panel-default">
                    <div class="panel-body">
                        <h4>Baby's Room</h4>
                        <br />
    
                        <img src="@ViewBag.URL:@ViewBag.Port/CGIProxy.fcgi?cmd=snapPicture2&usr=@ViewBag.User&pwd=@ViewBag.Pass&t=" onload='setTimeout(function() {src = src.substring(0, (src.lastIndexOf("t=")+2))+(new Date()).getTime()}, 1000)' onerror='setTimeout(function() {src = src.substring(0, (src.lastIndexOf("t=")+2))+(new Date()).getTime()}, 5000)'  img style='height: 100%; width: 100%; object-fit: contain' alt='' />
                        
                        <br />
                        <br />

                        <button type="button" class="btn btn-default btn-lg" ontouchstart="directCam('ptzMoveUp')" ontouchend="directCam('ptzStopRun')" onmousedown="directCam('ptzMoveUp')" onmouseup="directCam('ptzStopRun')">
                            <span class="glyphicon glyphicon-arrow-up" />
                        </button>

                        <button type="button" class="btn btn-default btn-lg" ontouchstart="directCam('ptzMoveLeft')" ontouchend="directCam('ptzStopRun')" onmousedown="directCam('ptzMoveLeft')" onmouseup="directCam('ptzStopRun')">
                            <span class="glyphicon glyphicon-arrow-left" />
                        </button>

                        <button type="button" class="btn btn-default btn-lg" ontouchstart="directCam('ptzMoveRight')" ontouchend="directCam('ptzStopRun')" onmousedown="directCam('ptzMoveRight')" onmouseup="directCam('ptzStopRun')">
                            <span class="glyphicon glyphicon-arrow-right" />
                        </button>

                        <button type="button" class="btn btn-default btn-lg" ontouchstart="directCam('ptzMoveDown')" ontouchend="directCam('ptzStopRun')" onmousedown="directCam('ptzMoveDown')" onmouseup="directCam('ptzStopRun')">
                            <span class="glyphicon glyphicon-arrow-down" />
                        </button>

                </div>
                </div>
    }
}
else
{
    <h3>You are not allowed to view this page.</h3>
}